<%# TODO: latex escaping everywhere %>
<%# TODO: column widths %>
<%# TODO: use UTF8 if possible; otherwise umlauts will mess up the erb renderer %>
\documentclass[8pt,a4paper]{scrartcl}
\usepackage[ngerman]{babel}
\usepackage[utf8]{inputenc}
\usepackage[dvips]{geometry}
\usepackage{ae}
\usepackage[T1]{fontenc}
\usepackage{scrpage2}
\usepackage{longtable}
\usepackage{lastpage}
\usepackage[NewCommands]{ragged2e}
\usepackage{array}
\usepackage{pstricks}
\pagestyle{scrheadings}
\geometry{top=2.5cm,left=1.0cm,right=1.0cm,bottom=2.5cm}
\begin{document}

% No section numbers
\setcounter{secnumdepth}{-2}

\newcommand{\cliptext}[2]{\psclip{\psframe[linestyle=none](-1,-1)(#1,2)}{\hbox{#2}}\endpsclip}

<%# TODO configurable %>
\cohead{Flugbuch für <%= l @person.full_name %>}
\lohead{}
\rohead{<%= render :partial=>'partials/date_range.tex', :locals=>{:date_range=>@date_range} %>}

\cofoot{}
\lofoot{<%= l version_string %>}
\rofoot{Seite \thepage{} von \pageref{LastPage}}

\setlength{\tabcolsep}{0.4mm}

<% if @flights.empty? %>
	Keine Flüge im angegebenen Zeitraum
<% else %>
	<%= l @flights.count %> Flüge

	<%= render :partial => 'partials/list_table.tex.erb', :locals => { :table => @table } %>
<% end %>

\end{document}
